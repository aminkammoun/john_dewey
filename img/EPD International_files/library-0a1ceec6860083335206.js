_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{"0LLa":function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return ee}));var r=n("wx14"),i=n("ODXe"),o=n("o0o1"),a=n.n(o),c=n("HaE+"),l=n("1OyB"),s=n("vuIU"),u=n("JX7q"),d=n("Ji7U"),f=n("md7G"),p=n("foSv"),h=n("rePB"),g=n("xZl7"),b=n("pvN5"),y=n("6rcp"),v=n("/Xqp"),m=n("O7iK"),x=n.n(m),O=n("wd/R"),w=n.n(O),S=n("8Kt/"),C=n.n(S),j=n("q1tI");function P(e,t){var n=Object(j.useRef)(null);Object(j.useEffect)((function(){n.current=e}),[e]),Object(j.useEffect)((function(){if(t){var e=setInterval((function(){!function(){var e;null===(e=n.current)||void 0===e||e.call(n)}()}),t);return function(){clearInterval(e)}}}),[t])}function R(e){return[null,void 0].includes(e)}var E="window",_="parent";function k(e){var t=e.getBoundingClientRect();return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}function D(e,t,n){if(e){var r=k(e),i=r.left,o=r.right,a=r.top,c=r.bottom;if(i>n)return!1;if(o<0)return!1;if(a>t)return!1;if(c<0)return!1}return!0}var N=function(e){var t=e.loading,n=e.hasNextPage,r=e.onLoadMore,i=e.threshold,o=void 0===i?150:i,a=e.checkInterval,c=void 0===a?200:a,l=e.scrollContainer,s=void 0===l?E:l,u=Object(j.useRef)(null),d=function(){var e="object"===typeof window,t=Object(j.useCallback)((function(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}),[e]),n=Object(j.useState)(t()),r=n[0],i=n[1];return Object(j.useEffect)((function(){function n(){i(t())}if(e)return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[t,e]),r}(),f=d.height,p=d.width,h=Object(j.useState)(!0),g=h[0],b=h[1];function y(){if(g&&!t&&n&&u.current){if(s===_){if(!function(){var e,t=null===(e=u.current)||void 0===e?void 0:e.parentNode;return!(!t||R(f)||R(p))&&D(t,f,p)}())return}else if(!function(){var e=u.current;return!(!e||R(f)||R(p))&&D(e,f,p)}())return;var e=function(){var e=u.current;if(!e||R(f))return null;var t=e.getBoundingClientRect().bottom,n=t-f;if(s===_){var r=e.parentNode;if(!r)return null;n=t-k(r).bottom}return n}();if(R(e))return;e<o&&(b(!1),r())}}return Object(j.useEffect)((function(){t||b(!0)}),[t]),P((function(){y()}),n?c:0),u},I=n("Cs6D"),V=n("QMgJ"),L=n("ZQds"),J=n("Pu/R"),z=n("vOnD"),G=n("2+Qt"),T=j.createElement;function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var M=["filterText","selectedLocation","selectedProductCategory","selectedPCR","selectedValidityCondition","selectedValidityDate","onlySelectorEpds"],U=function(e){Object(d.a)(n,e);var t=X(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(h.a)(Object(u.a)(e),"state",{locations:[],productCategories:[],searchResults:[],pcrs:[],isSearching:!1,onlySelectorEpds:!1,noResults:!1,isComplete:!0,currentPage:0}),Object(h.a)(Object(u.a)(e),"setPersistState",(function(){var t=x()(M.map((function(t){return[t,e.state[t]]})));sessionStorage.setItem("library-state",JSON.stringify(t))})),Object(h.a)(Object(u.a)(e),"getPersistedState",(function(){var e;return JSON.parse(null!==(e=sessionStorage.getItem("library-state"))&&void 0!==e?e:null)})),Object(h.a)(Object(u.a)(e),"onSearch",function(){var t=Object(c.a)(a.a.mark((function t(n){var r,i,o,c,l,s,u,d,f,p,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===n||void 0===n||n.preventDefault(),e.setState({isSearching:!0,searchResults:[],error:void 0,noResults:!1,currentPage:0,isComplete:!0}),r=e.props.librarySetting.pageSize,i=e.state,o=i.filterText,c=i.selectedPCR,l=i.selectedProductCategory,s=i.selectedLocation,u=i.selectedValidityCondition,d=i.selectedValidityDate,f=i.onlySelectorEpds,p={},u&&w()(d).isValid()&&(p={ValidityDateCondition:u.label,ValidityDate:w()(d).format()}),t.next=8,Object(V.c)("EPD",F({SmartFilter:o,PCRId:null===c||void 0===c?void 0:c.id,GeographicalScopeId:null===s||void 0===s?void 0:s.id,ProductCategoryId:null===l||void 0===l?void 0:l.id,OnlySelectorEPDs:f.toString(),Limit:r},p));case 8:if(h=t.sent,!Object(V.f)(h)){t.next=11;break}return t.abrupt("return",e.setState({isSearching:!1,error:h}));case 11:n&&h.length>0&&e.setPersistState(),e.setState({searchResults:h,isSearching:!1,noResults:0===h.length,isComplete:h.length!==r});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(h.a)(Object(u.a)(e),"loadNextPage",Object(c.a)(a.a.mark((function t(){var n,r,i,o,c,l,s,u,d,f,p,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.filterText,i=n.selectedPCR,o=n.selectedProductCategory,c=n.selectedLocation,l=n.selectedValidityCondition,s=n.selectedValidityDate,u=n.onlySelectorEpds,d=n.currentPage,e.setState({isSearching:!0,error:void 0}),f=e.props.librarySetting.pageSize,p={},l&&w()(s).isValid()&&(p={ValidityDateCondition:l.label,ValidityDate:w()(s).format()}),t.next=7,Object(V.c)("EPD",F({SmartFilter:r,PCRId:null===i||void 0===i?void 0:i.id,GeographicalScopeId:null===c||void 0===c?void 0:c.id,ProductCategoryId:null===o||void 0===o?void 0:o.id,OnlySelectorEPDs:u.toString(),Limit:f.toString(),Offset:"".concat((d+1)*f)},p));case 7:if(h=t.sent,!Object(V.f)(h)){t.next=10;break}return t.abrupt("return",e.setState({isSearching:!1,error:h,isComplete:!0}));case 10:e.setState({searchResults:e.state.searchResults.concat(h),isSearching:!1,noResults:0===h.length,isComplete:h.length!==f,currentPage:d+1});case 11:case"end":return t.stop()}}),t)})))),e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,o,c,l,s=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(V.c)("GeographicalScopes"),Object(V.c)("ProductCategories"),Object(V.c)("PCRS")]);case 2:t=e.sent,n=Object(i.a)(t,3),r=n[0],o=n[1],c=n[2],Object(V.f)(r)||Object(V.f)(o)||Object(V.f)(c)||(l=this.getPersistedState(),this.setState(F({locations:r,productCategories:o,pcrs:c},l),(function(){return s.onSearch()})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return T(j.Fragment,null,T(C.a,null,T("title",null,"EPD Library | EPD International")),T(L.d,{style:{display:"block",justifyContent:"center"}},T(y.c,{onSubmit:this.onSearch},T(y.d,null,"Search the EPD Library"),T(y.b,{title:"Filter"},T(y.a,{value:this.state.filterText,onChange:function(e){return t.setState({filterText:e.target.value})}})),T(y.b,{title:"Product Category"},T(I.a,Object(r.a)({},$,{value:this.state.selectedProductCategory,getOptionLabel:function(e){return e.title},getOptionValue:function(e){return e.id},options:this.state.productCategories,onChange:function(e){return t.setState({selectedProductCategory:e})},isClearable:!0}))),T(y.b,{title:"PCR"},T(I.a,Object(r.a)({},$,{value:this.state.selectedPCR,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},options:this.state.pcrs,onChange:function(e){return t.setState({selectedPCR:e})},isClearable:!0}))),T(y.b,{title:"Geographical scope"},T(I.a,Object(r.a)({},$,{value:this.state.selectedLocation,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},options:this.state.locations,onChange:function(e){return t.setState({selectedLocation:e})},isClearable:!0}))),T(y.b,{title:"Validity"},T(I.a,Object(r.a)({},$,{options:[{value:0,label:"Valid at"},{value:1,label:"Valid from"},{value:2,label:"Valid until"}],onChange:function(e){return t.setState({selectedValidityCondition:e})},isClearable:!0})),T(Y,{"aria-invalid":""!==this.state.selectedValidityDate&&!w()(this.state.selectedValidityDate).isValid(),onChange:function(e){return t.setState({selectedValidityDate:e.target.value})}})),T(y.b,{title:""},T(Z,{isChecked:this.state.onlySelectorEpds,onCheckedChanged:function(){return t.setState({onlySelectorEpds:!t.state.onlySelectorEpds})}},"Only sector EPDs")),T(y.f,{type:"submit",disabled:this.state.isSearching},"Search")),(null===(e=this.state)||void 0===e?void 0:e.isSearching)&&T("div",{style:{display:"flex",justifyContent:"center"}},T(v.a,{style:{color:J.a.colors.lightGreen}})),T(B,Object(r.a)({},this.state,{pageSize:this.props.librarySetting.pageSize,loadNextPage:this.loadNextPage})),T(Q,null,T(G.a,null,this.props.librarySetting.searchListMessage))))}}]),n}(j.Component),B=function(e){var t=N({loading:e.isSearching,hasNextPage:!e.isComplete,onLoadMore:e.loadNextPage});return T(K,{ref:t},T(A,e),e.error&&T(y.e,null,e.error.title),e.searchResults.map((function(e){return T(g.a,{key:e.id,epdId:e.id,friendlyUrl:e.friendlyUrl,category:e.productCategoryName,company:e.epdOwnerCompanyName,status:e.status,ribbonType:e.ribbonType,coverImage:e.coverFileId,pcr:e.fullRegistrationNumber,product:e.title,isCollection:e.isCollection})})),e.isSearching&&e.searchResults.length>0&&T(b.a,null))},A=function(e){var t=e.searchResults,n=e.noResults,r=e.pageSize;return 0===t.length?T(j.Fragment,null,n&&T(y.e,null,"No matches found")):t.length===r?T(y.e,null,"Showing the ".concat(r," most recently published EPDs")):T(j.Fragment,null,t.length>0&&T(y.e,null,"Found ".concat(t.length," matches")))},Q=z.d.div.withConfig({displayName:"library__Message",componentId:"sc-1l9fsri-0"})(["display:flex;flex-direction:column;width:60vw;align-self:center;"]),K=z.d.div.withConfig({displayName:"library__ResultContainer",componentId:"sc-1l9fsri-1"})(["position:relative;display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));justify-content:center;min-height:150px;padding:60px 0;"]),Z=function(e){var t=e.children,n=e.onCheckedChanged,r=e.isChecked;return T(W,null,T(H,{onChange:n,checked:r}),t)},H=z.d.input.attrs((function(){return{type:"checkbox"}})).withConfig({displayName:"library__Check",componentId:"sc-1l9fsri-2"})(["width:2rem;height:2rem;margin:0;margin-right:1rem;"]),W=z.d.label.withConfig({displayName:"library__CheckLabel",componentId:"sc-1l9fsri-3"})(["",";display:flex;align-items:center;"],J.a.fonts.text),Y=Object(z.d)(L.j).attrs((function(){return{type:"date"}})).withConfig({displayName:"library__DatePicker",componentId:"sc-1l9fsri-4"})(["",';flex:0 0 auto;font-size:1rem;padding:0.5rem;border-radius:4px;margin:0;height:38px;box-sizing:border-box;&[aria-invalid="true"]{border:2px solid red;}'],J.a.fonts.text),$={styles:{control:function(e){return F(F({},e),{},{border:"solid 1px gray"})}}},ee=!0;t.default=U},"0nGJ":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/library",function(){return n("0LLa")}])},"1OyB":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},JAO7:function(e,t,n){"use strict";var r=n("vOnD"),i=n("Pu/R"),o=r.d.a.withConfig({displayName:"ResultCardstyled__ResultCard",componentId:"b9u403-0"})(["overflow:hidden;position:relative;color:inherit;text-decoration:none;display:flex;flex-direction:column;padding:1rem;margin:1.5rem;flex:0 0 200px;border-radius:3px;box-shadow:4px 4px 16px rgb(0 0 0 / 15%);border:1px solid transparent;background-position:center bottom;background-repeat:no-repeat;background-size:cover;min-height:420px;max-height:420px;",":hover{border:1px solid gray;","}h3{font-size:0.75rem;font-weight:normal;color:gray;border-top:1px dotted lightgray;padding-top:0.5rem;margin-top:0.5rem;}h4{font-size:0.75rem;color:gray;align-self:flex-start;text-transform:uppercase;}h1{overflow:hidden;text-overflow:ellipsis;font-size:1.5rem;}.ellipsed{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;}h5{font-size:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}h2{margin-top:1rem;padding:0.4rem;text-align:right;background:white;border:2px solid currentColor;align-self:flex-end;font-size:1rem;border-radius:4px;}.image-container{overflow:hidden;width:100%;max-height:270px;object-fit:scale-down;position:absolute;bottom:0;right:0;left:0;display:flex;flex-direction:column;justify-content:flex-end;}img{width:100%;}> *{margin:0;}"],(function(e){return(null===e||void 0===e?void 0:e.isCollection)&&"box-shadow: 4px 4px 16px rgb(0 0 0 / 15%), 5px 5px 2px #e5e5e5, 11px 11px 1px #ffffff, 17px 17px 2px #e5e5e5, 23px 23px 1px #ffffff, 29px 29px 15px #e5e5e5;"}),(function(e){return(null===e||void 0===e?void 0:e.isCollection)&&"box-shadow: 5px 5px 2px ".concat(i.a.colors.mediumGreen,", 11px 11px 1px #ffffff, 17px 17px 2px ").concat(i.a.colors.green,", 23px 23px 1px #ffffff, 29px 29px 15px ").concat(i.a.colors.lightGreen,";")}));t.a=o},JX7q:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},Ji7U:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},O7iK:function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}},foSv:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},md7G:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return o}));var i=n("JX7q");function o(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?Object(i.a)(e):t}},pvN5:function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r),o=n("Pu/R"),a=n("/Xqp"),c=n("JAO7"),l=i.a.createElement;t.a=function(){return l(c.a,{style:{backgroundImage:"linear-gradient(0.375turn, white, white, rgba(255, 255, 255, 0))"}},l("h4",null,"\xa0"),l("h3",null,"\xa0"),l("h1",null,l(a.a,{style:{color:o.a.colors.lightGreen}}),"\xa0",l("br",null),"\xa0"),l("h5",null,"\xa0"),l("h2",{style:{opacity:0}},"\xa0"))}},vuIU:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},xZl7:function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r),o=n("QMgJ"),a=n("Pu/R"),c=n("JAO7"),l=i.a.createElement;t.a=function(e){var t=e.epdId,n=e.isCollection,r=e.friendlyUrl,i=e.category,s=e.company,u=(e.status,e.ribbonType),d=e.pcr,f=e.product,p=e.coverImage,h=p&&Object(o.b)(p);return l(c.a,{isCollection:n,href:n?"/library/collection/".concat(r):"/library/".concat(r),style:{backgroundImage:"linear-gradient(0.375turn, ".concat(n?a.a.colors.lightGreen:a.a.colors.gray,", white, rgba(255, 255, 255, 0)), url(").concat(Object(o.b)(t),")")}},u&&"None"!==u&&l("div",{className:"corner-ribbon top-right sticky green shadow"},u),l("h4",null,i),l("h3",null,d),l("h1",{className:"ellipsed"},f),l("h5",null,s),h&&l("div",{className:"image-container"},l("img",{src:h})))}}},[["0nGJ",0,1,9,2,3,4,5,6,7,8]]]);